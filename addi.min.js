var addi={_saveData:[],_dragClass:"draggable",_draggingClass:"isdragging",_addi_zIndex:100,oFence:{bFullscreen:!0,top:0,left:0,width:window.innerWidth,height:window.innerHeight},_savstyles:{transition:"auto"},init(e){e&&(this._dragClass=e);var t=document.getElementsByClassName(this._dragClass);if(t&&t.length)for(var s=0;s<t.length;s++)this.initDiv(t[s],!1)},_fixVisiblePosition(e,t,s){this._updateFence(e.style.paddingLeft);var i=window.getComputedStyle(e),a=0+parseInt(i.borderLeftWidth)+parseInt(i.borderRightWidth)+parseInt(i.marginLeft)+parseInt(i.marginRight)+parseInt(i.paddingLeft)+parseInt(i.paddingRight)-(window.innerWidth-document.documentElement.clientWidth),n=0+parseInt(i.borderTopWidth)+parseInt(i.borderBottomWidth)+parseInt(i.marginTop)+parseInt(i.marginBottom);return t=Math.max(this.oFence.left,t),t=Math.min(this.oFence.left+this.oFence.width-e.clientWidth-a,t),s=Math.max(this.oFence.top,s),"fixed"===i.position&&(s=Math.min(this.oFence.top+this.oFence.height-e.clientHeight-n,s)),{xpos:t,ypos:s}},_getVarname:e=>"addi.saveddiv-"+e,_save(e){aData={left:e.style.left.replace("px",""),top:e.style.top.replace("px","")},localStorage.setItem(this._getVarname(e.id),JSON.stringify(aData))},_styleSave(e){var t=window.getComputedStyle(e);for(var s in void 0===this._saveData[e.id]&&(this._saveData[e.id]=new Object),this._savstyles)this._saveData[e.id][s]=t.getPropertyValue(s),e.style[s]=this._savstyles[s];return!0},_styleRestore(e){for(var t in this._savstyles)e.style[t]=this._saveData[e.id][t];return!0},_updateFence(){this.oFence.bFullscreen&&(this.oFence={bFullscreen:!0,top:0,left:0,width:window.innerWidth,height:window.innerHeight})},_generateId(){for(var e="generatedId-",t=1;document.getElementById(e+t);)t++;return e+t},initDiv(e,t){var s=e.id;s||(s=this._generateId(),e.id=s);var i=e.currentStyle||window.getComputedStyle(e);!i.position||i.position,o=t||e,o.onmousedown=function(e){addi._isDragging=!0,addi.startMoving(document.getElementById(s),e)},o.onmouseup=function(){addi._isDragging=!1,addi.stopMoving(document.getElementById(s))},!1!==e.className.indexOf("saveposition")&&this.load(e)},load(e){var t=this._getVarname(e.id),s=e.currentStyle||window.getComputedStyle(e);s.zIndex&&s.zIndex>0&&(this._addi_zIndex=Math.max(parseInt(s.zIndex),this._addi_zIndex)),e.style.zIndex=this._addi_zIndex++;var i=!!localStorage.getItem(t)&&JSON.parse(localStorage.getItem(t));return i&&i.left&&i.top&&this.move(e,i.left,i.top,!0),i},move(e,t,s,i){e.style.bottom="auto";var a=i?{xpos:t,ypos:s}:this._fixVisiblePosition(e,t,s);return e.style.left=a.xpos+"px",e.style.top=a.ypos+"px",this._save(e),!0},startMoving(e,t){if(!1===e.className.indexOf(this._dragClass))return!1;var s=(t=t||window.event).clientX,i=t.clientY;this._styleSave(e),e.className.indexOf(this._draggingClass)<0&&(e.className+=" "+this._draggingClass),document.body.style.userSelect="none",iDivWidth=parseInt(e.style.width),iDivHeight=parseInt(e.style.height),e.style.cursor="move",e.style.zIndex=this._addi_zIndex++,iDivLeft=e.style.left?e.style.left.replace("px",""):e.offsetLeft,iDivTop=e.style.top?e.style.top.replace("px",""):e.offsetTop;var a=s-iDivLeft,n=i-iDivTop;return document.onmousemove=function(t){var s=(t=t||window.event).clientX,i=t.clientY,o=s-a,r=i-n;addi.move(e,o,r)},!0},stopMoving(e){e.style.cursor="default",this._styleRestore(e),document.body.style.userSelect="auto",e.className=e.className.replace(" "+this._draggingClass,""),e.className=e.className.replace(this._draggingClass,""),document.onmousemove=function(){}},resetPos(){var e=document.getElementsByClassName(this._dragClass);if(e&&e.length)for(var t=0;t<e.length;t++)e[t].style="",this._save(e[t])},reset(e){var t=document.getElementsByClassName(this._dragClass);if(t&&t.length)for(var s=0;s<t.length;s++)this._resetDiv(t[s],e)},_resetDiv(e,t){e.onmousemove=null,e.onmouseup=null,e.onmousedown=null,e.style="",t&&localStorage.removeItem(this._getVarname(e.id))}};