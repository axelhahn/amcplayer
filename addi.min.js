/* https://www.axel-hahn.de/ */
var addi=function(){return{_saveData:[],_dragClass:"draggable",oFence:{bFullscreen:true,top:0,left:0,width:window.innerWidth,height:window.innerHeight},_savstyles:{transition:"auto"},init:function(c){if(c){this._dragClass=c}var b=document.getElementsByClassName(this._dragClass);if(b&&b.length){for(var a=0;a<b.length;a++){this.initDiv(b[a],false)}}},_fixVisiblePosition:function(b,a,c){this._updateFence();a=Math.max(this.oFence.left,a);a=Math.min(this.oFence.left+this.oFence.width-b.clientWidth,a);c=Math.max(this.oFence.top,c);c=Math.min(this.oFence.top+this.oFence.height-b.clientHeight,c);return{xpos:a,ypos:c}},_getVarname:function(a){return"addi.saveddiv-"+a},_styleSave:function(b){aStyles=window.getComputedStyle(b);if(this._saveData[b.id]===undefined){this._saveData[b.id]=new Object()}for(var a in this._savstyles){this._saveData[b.id][a]=aStyles.getPropertyValue(a);b.style[a]=this._savstyles[a]}return true},_styleRestore:function(b){for(var a in this._savstyles){b.style[a]=this._saveData[b.id][a]}return true},_updateFence:function(){if(this.oFence.bFullscreen){this.oFence={bFullscreen:true,top:0,left:0,width:window.innerWidth,height:window.innerHeight}}},initDiv:function(c,b){var a=c.id;if(!a){return false}o=(b?b:c);o.onmousedown=function(d){addi.startMoving(document.getElementById(a),d)};o.onmouseup=function(){addi.stopMoving(document.getElementById(a))};if(navigator.appCodeName==="Mozilla"&&navigator.userAgent.indexOf("Firefox/")>0){c.setAttribute("draggable","true")}if(c.className.indexOf("saveposition")!==false){this.load(c)}},load:function(b){var c=this._getVarname(b.id);var a=localStorage.getItem(c)?JSON.parse(localStorage.getItem(c)):false;if(a&&a.left&&a.top){this.move(b,a.left,a.top,true)}return a},move:function(d,c,e,b){d.style.bottom="auto";var a=b?{xpos:c,ypos:e}:this._fixVisiblePosition(d,c,e);d.style.left=a.xpos+"px";d.style.top=a.ypos+"px";this.save(d);return true},save:function(a){aData={left:a.style.left.replace("px",""),top:a.style.top.replace("px","")};localStorage.setItem(this._getVarname(a.id),JSON.stringify(aData))},startMoving:function(d,a){if(d.className.indexOf(this._dragClass)===false){return false}a=a||window.event;var f=a.clientX,e=a.clientY;this._styleSave(d);iDivWidth=parseInt(d.style.width),iDivHeight=parseInt(d.style.height);d.style.cursor="move";iDivLeft=d.style.left?d.style.left.replace("px",""):d.offsetLeft;iDivTop=d.style.top?d.style.top.replace("px",""):d.offsetTop;var c=f-iDivLeft,b=e-iDivTop;document.onmousemove=function(g){g=g||window.event;var k=g.clientX,j=g.clientY,i=k-c,h=j-b;addi.move(d,i,h)};return true},stopMoving:function(a){a.style.cursor="default";this._styleRestore(a);document.onmousemove=function(){}},reset:function(d,a){if(!d){d=this._dragClass}var c=document.getElementsByClassName(d);if(c&&c.length){for(var b=0;b<c.length;b++){this.resetDiv(c[b],a)}}},resetDiv:function(b,a){b.onmousemove=null;b.onmouseup=null;b.onmousedown=null;if(a){localStorage.delItem(this._getVarname(b.id))}}}}();