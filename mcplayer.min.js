class mcPlayer{cfg={about:{version:"1.04-dev",label:"AMC Player",description:"<strong>A</strong>xels <strong>M</strong>ulti <strong>C</strong>hannel <strong>Player</strong>.<br>This is a webbased HTML5 audio player.<br>It's focus is the handling of media in stereo and surround for a title.",labeldownload:"Download:<br>",download:"http://sourceforge.net/projects/amcplayer/files/latest/download",labellicense:"License: ",license:"GPL 3.0",labelurl:"Project url:<br>",url:"https://github.com/axelhahn/amcplayer/",labeldocurl:"Documentation:<br>",docurl:"https://www.axel-hahn.de/docs/amcplayer/index.htm"},links:{play:{title:"play"}},aPlayer:{buttons:{play:{sticky:!0,title:"Play"},pause:{sticky:!0,title:"Pause"},stop:{sticky:!0,title:"Stop"},backward:{sticky:!1,title:"Back"},forward:{sticky:!1,title:"Forward"},jumpprev:{sticky:!1,title:"Previous title"},jumpnext:{sticky:!1,title:"Next title"},audiochannels:{title:"switch between stereo/ surround",noswitch:"stereo/ surround switch was deactivated (mobile device or Opera Presto engine)"},volmute:{visible:!0,title:"Mute"},volfull:{visible:!0,title:"Max. volume"},about:{visible:!0,title:"about ...",box:"mcpabout"},playlist:{visible:!0,title:"Toggle playlist",box:"mcpplaylist"},repeat:{visible:!0,title:"Repeat"},shuffle:{visible:!0,title:"Shuffle"},download:{visible:!0,title:"Toggle download list",box:"mcpdownloads"},maximize:{label:"Player",sticky:!1,title:"Show player"},minimize:{label:"",sticky:!1,title:"Minimize"},statusbar:{label:"",title:"Toggle statusbar with network activity and media status"}},bars:{volume:{visible:!0,title:"Set volume"},progress:{visible:!0,title:"Set position"}},about:{title:"About ..."},playlist:{title:"Playlist"},download:{title:"Download audio files",noentry:"Select or play an audio first to show its downloads.",hint:"Use the right mousebutton or context menu to save the link target"},songinfo:{album:"Album",year:"Year",bpmspeed:"Speed",bpm:"bpm",genre:"Genre",url:"Web"},status:{networkstate:{label:"Network activity",0:["Empty","0 = NETWORK_EMPTY - audio/video has not yet been initialized"],1:["Idle","1 = NETWORK_IDLE - audio/video is active and has selected a resource, but is not using the network"],2:["Loading","2 = NETWORK_LOADING - browser is downloading data"],3:["No Source","3 = NETWORK_NO_SOURCE - no audio/video source found"]},readystate:{label:"Status",0:["Have nothing","0 = HAVE_NOTHING - no information whether or not the audio/video is ready"],1:["Have Metadata","1 = HAVE_METADATA - metadata for the audio/video is ready"],2:["OK, Current data","2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond"],3:["OK, Future data","3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available"],4:["OK, Enough data","4 = HAVE_ENOUGH_DATA - enough data available to start playing"]}}},settings:{autoopen:!1,movable:!0,repeatlist:!0,showsonginfos:!0,showhud:!0,showstatusbar:!1,shuffle:!1,volume:.9}};oAudio=!1;sCurrentChannel=!1;iMaxVol=1;iCurrentTime=!1;bIsFading=!1;iVolInc=.02;iTimer=20;iHudTimer=5;iRemoveTimer=2;aPL=[];iCurrentSong=-1;aPlayorderList=[];iPlaylistId=-1;_iMinDelta=100;_sContainerId=!1;sScreensize=!1;name=!1;playlink="[title]";constructor(t){t&&this.setConfig(t),this.canPlaySurround();try{this.sCurrentChannel=!!localStorage.getItem("amcp.channels")&&localStorage.getItem("amcp.channels"),this.cfg.settings.volume=localStorage.getItem("amcp.volume")/1?localStorage.getItem("amcp.volume")/1:1}catch(t){}return!0}init(t){return this._sContainerId=t,this.#t(),this.#e(),this.#i(),"undefined"!=typeof addi&&addi.init(),this.minimizeBox("about",!0),this.minimizeBox("download",!0),this.minimizeBox("playlist",!0),window.setInterval(this.name+".updateStatus()",500),!0}#s(t){var e=document.getElementById(this._sContainerId)?document.getElementById(this._sContainerId):document.getElementsByTagName("BODY")[0];e&&(e.innerHTML+=t)}#a(t){this.fade(0,t)}#n(){var t="";t+='<div id="mcpplayersonginfo"></div>';var e=new Array("play","pause","stop","backward","forward");this.aPL.length>1&&e.push("jumpprev","jumpnext"),t+='<div id="mcpplayerbtndiv">';for(var i=0;i<e.length;i++)t+='<a href="#" id="mcp'+e[i]+'" onclick="'+this.name+".playeraction('"+e[i]+'\'); return false;" title="'+this.cfg.aPlayer.buttons[e[i]].title+'"></a>';t+='</div><div id="mcpprogressdiv"'+(this.cfg.aPlayer.bars.progress.visible?"":'style="display: none"')+'><div class="mcpslider"><div class="mcpslider-default"></div><div id="mcpprogressbar" class="mcpslider-active"></div></div></div><span id="mcptime"><span id="mcptimeplayed">-:--</span>/ <span id="mcptimetotal">-:--</span></span><div id="mcpvolumesection"><a href="#" id="mcpvolmute" onclick="'+this.name+'.setVolume(0); return false;" '+(this.cfg.aPlayer.buttons.volmute.visible?"":'style="display: none" ')+'title="'+this.cfg.aPlayer.buttons.volmute.title+'"></a><div id="mcpvolumediv" title="volume"><div class="mcpslider"><div class="mcpslider-default"></div><div id="mcpvolumebar" class="mcpslider-active"></div></div></div><a href="#" id="mcpvolfull" onclick="'+this.name+'.setVolume(1); return false;" '+(this.cfg.aPlayer.buttons.volfull.visible?"":'style="display: none" ')+'title="'+this.cfg.aPlayer.buttons.volfull.title+'"></a></div><div id="mcpchannels"></div><div id="mcpoptions"><a href="#" onclick="'+this.name+'.toggleRepeat(); return false;" id="mcpoptrepeat" '+(this.isRepeatlist()?'class="active" ':"")+'title="'+this.cfg.aPlayer.buttons.repeat.title+'"></a><a href="#" onclick="'+this.name+'.toggleShuffle(); return false;" id="mcpoptshuffle" '+(this.cfg.settings.shuffle?'class="active" ':"")+'title="'+this.cfg.aPlayer.buttons.shuffle.title+'"></a><a href="#" onclick="'+this.name+'.toggleStatusbar(); return false;" id="mcpoptstatusbar" '+(this.isVisibleStatusbar()?'class="active" ':"")+'title="'+this.cfg.aPlayer.buttons.statusbar.title+'"></a>';var s=["download","playlist","about"];for(i=0;i<s.length;i++)"mcpopt"+s[i],t+='<a href="#" onclick="'+this.name+".toggleBoxAndButton('"+s[i]+'\'); return false;" id="mcpopt'+s[i]+'" '+(this.cfg.aPlayer.buttons[s[i]].visible?"":'style="display: none" ')+' title="'+this.cfg.aPlayer.buttons[s[i]].title+'"></a>';return t+='</div><div id="mcpstatusbar"'+(this.cfg.settings.showstatusbar?' class="active" ':"")+"><div>"+this.cfg.aPlayer.status.networkstate.label+': <span id="mcpstatusnetwork"></span></div><div>'+this.cfg.aPlayer.status.readystate.label+': <span id="mcpstatusready"></span></div></div>'}#o(){return'<div class="mcpbox"><span class="ico-about"> '+this.cfg.aPlayer.about.title+'</span><span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+".toggleBoxAndButton('about', 'minimize'); return false;\" title=\""+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+'</a></span></div><div><p class="amclogo"></p><div class="title">'+this.cfg.about.label+" v"+this.cfg.about.version+"</div><p>"+this.cfg.about.description+"</p><p>"+this.cfg.about.labellicense+this.cfg.about.license+"</p><p>"+this.cfg.about.labelurl+'<a href="'+this.cfg.about.url+'" target="_blank">'+this.cfg.about.url+"</a></p><p>"+this.cfg.about.labeldownload+'<a href="'+this.cfg.about.download+'" target="_blank">'+this.cfg.about.download+"</a></p><p>"+this.cfg.about.labeldocurl+'<a href="'+this.cfg.about.docurl+'" target="_blank">'+this.cfg.about.docurl+"</a></p></div>"}#l(){var t='<div class="mcpbox"><span class="ico-playlist"> '+this.cfg.aPlayer.playlist.title+'</span><span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+".toggleBoxAndButton('playlist', 'minimize'); return false;\" title=\""+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div>";if(this.aPL.length>0){t+="<ul>";for(var e=0;e<this.aPL.length;e++)t+="<li"+(this.iCurrentSong===e?' class="active"':"")+'><a href="#" onclick="'+this.name+".setSong("+e+'); return false;">'+(this.aPL[e].title?this.aPL[e].title:"Audio #"+(e+1))+"</a></li>";t+="</ul>"}return t}#r(){if(!this.cfg.settings.showsonginfos)return"";var t=(this.getSongArtist()?'<div class="artist">'+this.getSongArtist()+"</div>":"")+(this.getSongAlbum()?'<div class="album">'+this.cfg.aPlayer.songinfo.album+": "+this.getSongAlbum()+"</div>":"")+(this.getSongYear()?'<div class="year">'+this.cfg.aPlayer.songinfo.year+": "+this.getSongYear()+"</div>":"")+(this.getSongBpm()?'<div class="bpm">'+this.cfg.aPlayer.songinfo.bpmspeed+": "+this.getSongBpm()+" "+this.cfg.aPlayer.songinfo.bpm+"</div>":"")+(this.getSongGenre()?'<div class="genre">'+this.cfg.aPlayer.songinfo.genre+": "+this.getSongGenre()+"</div>":"")+(this.getSongUrl()?'<div class="url">'+this.cfg.aPlayer.songinfo.url+': <a href="'+this.getSongUrl()+'" target="_blank">'+this.getSongUrl()+"</a></div>":"");return(t||this.getSongImage())&&(t="<div>"+(this.getSongImage()?'<img src="'+this.getSongImage()+'">':"")+(this.getSongTitle()?'<div class="title">'+this.getSongTitle()+"</div>":"")+t,t+='<div style="clear: both;"></div>',t+="</div>"),t}#d(){var t="",e=!1,i=!1;if(this.aPL.length>0){if(t+='<div class="mcpbox"><span class="ico-download"> '+this.cfg.aPlayer.download.title+'</span><span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+".toggleBoxAndButton('download', 'minimize'); return false;\" title=\""+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div><ul>",-1===this.iCurrentSong)t+="<li>"+this.cfg.aPlayer.download.noentry+"</li>";else{t+="<li>"+this.cfg.aPlayer.download.hint+"<br><br></li>";for(var s=0;s<this.aPL.length;s++)if((e=this.aPL[s].title)||(e="Audio #"+(s+1)),-1===this.iCurrentSong||this.iCurrentSong==s){for(var a in t+="<li "+(this.iCurrentSong==s?' class="active"':"")+"><strong>"+e+"</strong><ul>",this.aPL[s].sources){t+="<li>"+a+": ";for(var n=0;n<this.aPL[s].sources[a].length;n++)this.aPL[s].sources[a][n].src,(i=this.aPL[s].sources[a][n].type.replace("audio/",""))||(i=this.aPL[s].sources[a][n].src.replace(/^.*\/|\.[^.]*$/g,"")),t+=(n>0?" | ":"")+'<a href="'+this.aPL[s].sources[a][n].src+'" title="'+e+" ("+a+"; "+i+")\n"+this.aPL[s].sources[a][n].src+'">'+i+"</a>";t+="</li>"}t+="</ul></li>"}}t+="</ul>"}return t}#e(){this.#m(),this.#u()}#t(){for(var t in this.global)if(this.global[t]===this)return this.#c(t)}#h(t,e){return parseInt(10*Math.random())%2}#u(){if(this.aPlayorderList=[],this.aPL.length){for(var t=0;t<this.aPL.length;t++)this.aPlayorderList[t]=t;this.isShuffled()&&(this.iCurrentSong>=0&&this.aPlayorderList.splice(this.iCurrentSong,1),this.aPlayorderList.sort(this.#h),this.iCurrentSong>=0&&this.aPlayorderList.unshift(this.iCurrentSong)),this.#g()}}#p(t){var e=this.getSong();return!!e&&e[t]}#g(){if(this.iPlaylistId=!1,this.iCurrentSong>=0)for(var t=0;t<this.aPlayorderList.length;t++)this.aPlayorderList[t]===this.iCurrentSong&&(this.iPlaylistId=t);return this.iPlaylistId}#i(){var t=' style="top: '+(document.documentElement.clientHeight+100)+'px;"';this.oDivDownloads=document.getElementById("mcpdownloads"),this.oDivDownloads||(this.#s('<div id="mcpdownloads" class="draggable saveposition"'+t+"></div>"),this.oDivDownloads=document.getElementById("mcpdownloads")),this.oDivDownloads.innerHTML=this.#d(),this.oDivPlaylist=document.getElementById("mcpplaylist"),this.oDivPlaylist||(this.#s('<div id="mcpplaylist" class="draggable saveposition"'+t+"></div>"),this.oDivPlaylist=document.getElementById("mcpplaylist")),this.oDivPlaylist.innerHTML=this.#l(),this.oDivPlayerwrapper=document.getElementById("mcpwrapper"),this.oDivPlayerwrapper||(this.#s('<div id="mcpwrapper"'+(this.cfg.settings.movable?' class="draggable saveposition"':"")+"></div>"),this.oDivPlayerwrapper=document.getElementById("mcpwrapper")),this.oDivHeader=document.getElementById("mcpheader"),this.oDivHeader||(this.oDivPlayerwrapper.innerHTML+='<div id="mcpheader" class="mcpbox"><span class="ico-playlist"> '+this.cfg.about.label+" v"+this.cfg.about.version+' <span id="mcptitle"></span><span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+'.minimize(); return false" title="'+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div>"),this.oDivAudios||(this.oDivPlayerwrapper.innerHTML+='<div id="mcpplayeraudios"></div>',this.oDivAudios=document.getElementById("mcpplayeraudios")),this.oDivPlayer=document.getElementById("mcplayer"),this.oDivPlayer||(this.oDivPlayerwrapper.innerHTML+='<div id="mcplayer"></div>',this.oDivPlayer=document.getElementById("mcplayer"),this.oDivPlayer.innerHTML=this.#n()),this.oAPlayermaximize=document.getElementById("mcpmaximize"),this.oAPlayermaximize||(this.#s('<a href="#" id="mcpmaximize" class="mcpsystembutton hidebutton" onclick="'+this.name+'.maximize(); return false" title="'+this.cfg.aPlayer.buttons.maximize.title+'"> '+this.cfg.aPlayer.buttons.maximize.label+"</a>"),this.oAPlayermaximize=document.getElementById("mcpmaximize")),this.#s('<div id="mcpabout" class="draggable saveposition"'+t+">"+this.#o()+"</div>"),this.oDivPlayerhud=document.getElementById("mcphud"),this.oDivPlayerhud||(this.#s('<div id="mcphud"></div>'),this.oDivPlayerhud=document.getElementById("mcphud")),this.#y()}#v(){return document.getElementById("mcphud").className="",!0}#f(){this.iRemoveTimer=this.iRemoveTimer-100,this.iRemoveTimer>0?window.setTimeout(this.name+".#decHudTimer()",100):(this.#v(),this.iRemoveTimer=!1)}#b(){if("undefined"!=typeof addi&&this.cfg.settings.movable){var t=document.getElementById("mcpwrapper"),e=t.style.top.replace("px","")/1,i=e+t.clientHeight/2,s=document.documentElement.clientHeight;if(i>s/3){var a=t.clientHeight-this._iHeightPlayerWindow;t.style.top=(i>2*s/3?e-a:e-a/2)+"px"}this.#y()}}#y(){this._iHeightPlayerWindow=document.getElementById("mcpwrapper").clientHeight}#m(){for(var t=document.getElementsByTagName("AUDIO"),e=new Array,i=!1,s=!1,a=!1,n=!1,o=0;o<t.length;o++){t[o].style.display="none",a={title:t[o].dataset.title?t[o].dataset.title:t[o].title?t[o].title:"",artist:!!t[o].dataset.artist&&t[o].dataset.artist,album:!!t[o].dataset.album&&t[o].dataset.album,year:!!t[o].dataset.year&&t[o].dataset.year,image:!!t[o].dataset.image&&t[o].dataset.image,genre:!!t[o].dataset.genre&&t[o].dataset.genre,bpm:!!t[o].dataset.bpm&&t[o].dataset.bpm,url:!!t[o].dataset.url&&t[o].dataset.url,sources:{}};for(var l=0;l<t[o].children.length;l++)"SOURCE"===(n=t[o].children[l]).tagName&&(s="any",n.title&&(s=n.title),i={src:n.src,type:n.type},a.sources[s]||(a.sources[s]=new Array),a.sources[s].push(i));this.addAudio(a);var r=document.createElement("A");r.href="#",r.title=this.cfg.links.play.title+": "+a.title,r.innerHTML=this.playlink.replace("[title]",""),r.setAttribute("onclick",this.name+".setSong("+o+"); /* "+this.name+".maximize(); */ return false;"),r.setAttribute("class","songbtn icon-play"),r.setAttribute("id","mcpaudioPlay"+o),t[o].parentNode.appendChild(r)}return e}#c(t){return this.name=t,this.name}#w(t){return this.cfg.settings.showstatusbar=!!t,this.toggleBoxAndButton("statusbar",t?"maximize":"minimize"),document.getElementById("mcpstatusbar").className=t?"active":"",this.#b(),!0}#P(t){if(!this.cfg.settings.showhud||this.cfg.settings.autoopen||this.isVisiblePlayer())return!1;var e=document.getElementById("mcphud");return this.iRemoveTimer=1e3*this.iHudTimer,e.className="active",e.innerHTML=t,this.#f(),!0}#S(t){return this.cfg.aPlayer.buttons[t]&&this.cfg.aPlayer.buttons[t].box?document.getElementById(this.cfg.aPlayer.buttons[t].box):"player"===t&&document.getElementById("mcpwrapper")}#A(t,e){return t.volume=.001,t.play(),e&&(t.currentTime=e),!0}addAudio(t){if(!t.sources)return!1;t.title||(t.title="audio "+(this.aPL.length+1)),this.aPL.push(t),this.#u()}canPlaySurround(){var t,e=!0;return navigator.userAgent.indexOf("Presto/")>=0&&(e=!1),t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!1),e}disableRepeat(){this.cfg.settings.repeatlist=!1,this.toggleBoxAndButton("repeat","minimize")}disableShuffle(){this.cfg.settings.shuffle=!1,this.#u(),this.toggleBoxAndButton("shuffle","minimize")}disableStatusbar(){return this.#w(!1)}enableRepeat(){this.cfg.settings.repeatlist=!0,this.toggleBoxAndButton("repeat","maximize")}enableShuffle(){this.cfg.settings.shuffle=!0,this.#u(),this.toggleBoxAndButton("shuffle","maximize")}enableStatusbar(){return this.#w(!0)}fade(t,e){this.bIsFading=!0;var i=document.getElementById("mcp"+e);if(!i)return!1;var s=i.volume;return s+=t<s?-this.iVolInc:this.iVolInc,0===t&&s>0||t>0&&s<t?(i.volume=s,window.setTimeout(this.name+".fade("+t+", '"+e+"')",this.iTimer)):(this.bIsFading=!1,i.volume=t,s<=0&&i.pause()),!0}getAudioChannels(){return this.sCurrentChannel}getAllAudioChannels(){var t=this.getSong();if(!t)return!1;var e=[];for(var i in t.sources)e.push(i);return e}getAudioDuration(){return!!this.sCurrentChannel&&this.oAudio.duration}getAudioNetworkstate(){var t=this.oAudio?this.oAudio:document.getElementById("mcp"+this.getAudioChannels());return!!t&&t.networkState}getAudioPosition(){return!!this.sCurrentChannel&&this.oAudio.currentTime}getAudioReadystate(){var t=this.oAudio?this.oAudio:document.getElementById("mcp"+this.getAudioChannels());return!!t&&t.readyState}getAudioSrc(){return!!this.sCurrentChannel&&this.oAudio.currentSrc}getVolume(){return!!this.oAudio&&(this.cfg.settings.volume=this.oAudio.volume,this.cfg.settings.volume)}getPlaylist(){return!(!this.aPL||!this.aPL.length)&&this.aPL}getPlaylistCount(){return!!this.aPL&&this.aPL.length}getPlayorder(){return this.aPlayorderList}getSong(){return!(!this.aPL||!this.aPL.length)&&this.aPL[this.iCurrentSong]}getSongId(){return this.iCurrentSong}getSongTitle(){return this.#p("title")}getSongArtist(){return this.#p("artist")}getSongAlbum(){return this.#p("album")}getSongYear(){return this.#p("year")}getSongImage(){return this.#p("image")}getSongGenre(){return this.#p("genre")}getSongBpm(){return this.#p("bpm")}getSongUrl(){return this.#p("url")}getPlaylistId(){return this.iPlaylistId}isMuted(){return this.oAudio&&(this.oAudio.muted||!this.oAudio.volume)}isPaused(){return this.oAudio&&this.oAudio.paused&&0!==this.oAudio.currentTime}isPlaying(){return this.oAudio&&!this.oAudio.paused}isRepeatlist(){return!!this.cfg.settings.repeatlist&&!!this.cfg.settings.repeatlist}isShuffled(){return!!this.cfg.settings.shuffle&&this.cfg.settings.shuffle}isStopped(){return!this.oAudio||0===this.oAudio.currentTime}isStream(){return this.oAudio&&this.oAudio.isStream}isVisibleBox(t){var e="player"===t?"mcpmaximize":"mcpopt"+t,i=document.getElementById(e);return!!i&&!!i.className}isVisibleBoxAbout(){return this.isVisibleBox("about")}isVisibleBoxDownload(){return this.isVisibleBox("download")}isVisibleBoxPlaylist(){return this.isVisibleBox("playlist")}isVisiblePlayer(){return this.isVisibleBox("player")}isVisibleStatusbar(){return this.cfg.settings.showstatusbar}makeMainwindowMovable(t){this.cfg.settings.movable=t,o=document.getElementById("mcpwrapper"),this.cfg.settings.movable&&(o.className="draggable saveposition","undefined"!=typeof addi?addi.initDiv(o):this.cfg.settings.movable=!1),this.cfg.settings.movable||(o.className="","undefined"!=typeof addi&&addi.resetDiv(o),this.maximize(),o.setAttribute("style",""))}maximize(){o=document.getElementById("mcpwrapper"),o.setAttribute("style",""),this.cfg.settings.movable&&"undefined"!=typeof addi&&addi.load(document.getElementById("mcpwrapper")),document.getElementById("mcpmaximize").className="hidebutton"}maximizeBox(t,e){return this.toggleBoxAndButton(t,"maximize",e)}minimize(t){o=document.getElementById("mcpwrapper"),o.style["transition-duration"]=t?"0s":"",o.style.top=document.documentElement.clientHeight+this._iMinDelta+"px",this.minimizeBox("about"),this.minimizeBox("download"),this.minimizeBox("playlist"),document.getElementById("mcpmaximize").className=""}minimizeBox(t,e){return this.toggleBoxAndButton(t,"minimize",e)}playeraction(t){if(!this.oAudio){if("play"!==t)return!1;this.setSong(this.aPlayorderList[0])}switch(t){case"play":this.oAudio.play();break;case"pause":this.oAudio.pause();break;case"stop":this.oAudio.pause();try{this.oAudio.currentTime=0}catch(t){}break;case"forward":this.oAudio.currentTime+=10;break;case"backward":this.oAudio.currentTime-=10;break;case"jumpprev":this.setPreviousSong();break;case"jumpnext":this.setNextSong();break;default:alert("playeraction not implemented yet: ["+t+"]")}if(this.cfg.aPlayer.buttons[t].sticky){for(var e=document.getElementById("mcpplayerbtndiv").getElementsByTagName("A"),i=0;i<e.length;i++)e[i].className="";document.getElementById("mcp"+t).className="active"}}setAudioPosition(t){return!(!this.sCurrentChannel||this.oAudio.duration<t)&&(this.oAudio.currentTime=t)}setChannel(t){var e=!1,i=!1,s=document.getElementById("mcpchannels").getElementsByTagName("LI");if(s.length)for(var a=0;a<s.length;a++)(e=s[a].getElementsByTagName("A"))&&e.length>0&&(e[0].className="",e[0].innerHTML&&e[0].innerHTML===t&&(i=e[0].parentNode,e[0].className="active")),s[a].className="";i&&(i.className="active");var n=this.isPlaying();return this.sCurrentChannel!==t&&(!this.bIsFading&&(this.oAudio&&(this.iCurrentTime=this.oAudio.currentTime,this.getVolume(),this.#a(this.sCurrentChannel)),this.oAudio=!1,t&&((oAudioTmp4ChannelSwitch=document.getElementById("mcp"+t)).idurationchange=0,oAudioTmp4ChannelSwitch.isStream=!1,oAudioTmp4ChannelSwitch.lastDuration=!1,this.oAudio=oAudioTmp4ChannelSwitch,this.oAudio&&(n&&this.#A(this.oAudio,this.iCurrentTime),this.oAudio.volume=this.cfg.settings.volume,document.getElementById("mcptimeplayed").innerHTML="?:??",document.getElementById("mcptimetotal").innerHTML="?:??",document.getElementById("mcptime").style.display="block",this.oAudio.addEventListener("durationchange",(function(){oAudioTmp4ChannelSwitch.duration===1/0?oAudioTmp4ChannelSwitch.isStream=!0:oAudioTmp4ChannelSwitch.lastDuration!==oAudioTmp4ChannelSwitch.duration&&(oAudioTmp4ChannelSwitch.idurationchange++,oAudioTmp4ChannelSwitch.lastDuration=oAudioTmp4ChannelSwitch.duration,oAudioTmp4ChannelSwitch.idurationchange>3&&(oAudioTmp4ChannelSwitch.isStream=!0))})),oAudioTmp4ChannelSwitch.addEventListener("timeupdate",(function(){if(document.getElementById("mcpprogressdiv").style.display=oAudioTmp4ChannelSwitch.isStream?"none":"",document.getElementById("mcptime").style.display=oAudioTmp4ChannelSwitch.isStream?"none":"block",document.getElementById("mcppause").style.display=oAudioTmp4ChannelSwitch.isStream?"none":"block",document.getElementById("mcpbackward").style.display=oAudioTmp4ChannelSwitch.isStream?"none":"block",document.getElementById("mcpforward").style.display=oAudioTmp4ChannelSwitch.isStream?"none":"block",!oAudioTmp4ChannelSwitch.currentTime)return document.getElementById("mcptimeplayed").innerHTML="-:--",document.getElementById("mcptimetotal").innerHTML="-:--",!1;if(oAudioTmp4ChannelSwitch.isStream)return!1;var t=parseInt(oAudioTmp4ChannelSwitch.currentTime%60),e=parseInt(oAudioTmp4ChannelSwitch.currentTime/60%60);t<10&&(t="0"+t);var i=parseInt(oAudioTmp4ChannelSwitch.duration%60),s=parseInt(oAudioTmp4ChannelSwitch.duration/60%60);i<10&&(i="0"+i),document.getElementById("mcptimeplayed").innerHTML=e+":"+t,document.getElementById("mcptimetotal").innerHTML=s+":"+i;var a=document.getElementById("mcpprogressbar");a&&(a.style.width=oAudioTmp4ChannelSwitch.currentTime/oAudioTmp4ChannelSwitch.duration*100+"%")}),!1),document.getElementById("mcpprogressdiv").addEventListener("click",(function(t){if(void 0!==t.x&&void 0!==t.y)var e=t.x;else e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;var i=document.getElementById("mcpprogressdiv"),s=document.getElementById("mcpwrapper");e-=i.offsetLeft+s.offsetLeft,oAudioTmp4ChannelSwitch&&oAudioTmp4ChannelSwitch.currentTime&&(oAudioTmp4ChannelSwitch.currentTime=oAudioTmp4ChannelSwitch.duration*(e/i.clientWidth))}),!0),oAudioTmp4ChannelSwitch.addEventListener("volumechange",(function(){var t=document.getElementById("mcpvolumebar");t&&(t.style.width=100*oAudioTmp4ChannelSwitch.volume+"%")}),!1),this.oAudio.volume=this.cfg.settings.volume-.01,this.oAudio.volume=this.cfg.settings.volume,document.getElementById("mcpvolumediv").addEventListener("click",(function(t){if(void 0!==t.x&&void 0!==t.y)var e=t.x;else e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;var i=document.getElementById("mcpvolumediv"),s=document.getElementById("mcpwrapper");e-=i.offsetLeft+s.offsetLeft;try{localStorage.setItem("amcp.volume",e/i.clientWidth),oAudioTmp4ChannelSwitch.volume=e/i.clientWidth}catch(t){}}),!0),oAudioTmp4ChannelSwitch.addEventListener("ended",(function(){document.getElementById("mcpjumpnext").click()}),!1))),this.sCurrentChannel=t,localStorage.setItem("amcp.channels",this.sCurrentChannel),!0))}setConfig(t){this.cfg=realMerge(this.cfg,t)}setNextSong(){return!(!this.aPL||!this.aPL.length)&&(this.iPlaylistId<this.aPlayorderList.length-1?this.setSong(this.aPlayorderList[this.iPlaylistId+1]):(this.#u(),void(this.isRepeatlist()&&this.setSong(this.aPlayorderList[this.isShuffled()?1:0]))))}setPreviousSong(){return!(!this.aPlayorderList||!this.aPlayorderList.length)&&(this.iPlaylistId>0?this.setSong(this.aPlayorderList[this.iPlaylistId-1]):this.setSong(this.aPlayorderList[this.aPlayorderList.length-1]))}setSong(t){if(!this.aPL[t])return!1;if(this.bIsFading)return!1;var e="",i="",s=!1,a=!1,n=!1,o=0,l=!1,r=!1,d=!1;if(this.oAudio){this.getVolume(),this.oAudio.pause();try{this.oAudio.currentTime=0}catch(t){}this.oAudio=!1}this.oDivAudios.innerHTML="";for(var m in this.aPL[t].sources)if(this.aPL[t].sources[m].length){for(s||(s=m),a!==m&&(o++,i+="<li>",this.canPlaySurround()?i+='<a href="#" onclick="'+this.name+".setChannel('"+m+'\'); return false;" title="'+this.cfg.aPlayer.buttons.audiochannels.title+": "+m+'">'+m+"</a>":i+='<a href="#" onclick="return false;" title="'+this.cfg.aPlayer.buttons.audiochannels.noswitch+'">'+m+"</a>",i+="</li>",a=m,m===this.sCurrentChannel&&(n=!0)),e+='<audio id="mcp'+m+'"  >',h=0;h<this.aPL[t].sources[m].length;h++)l=this.aPL[t].sources[m][h],(r=String(l.src)).indexOf("?")<0&&(r+="?"),e+='<source src="'+r+'" type="'+l.type+'">';e+="</audio>"}1===o&&(i=""),document.getElementById("mcpplayeraudios").innerHTML=e,i&&(i="<ul>"+i+"</ul>"),document.getElementById("mcpchannels").innerHTML=i,this.iCurrentSong=t,this.#g(),document.getElementById("mcpplaylist").innerHTML=this.#l(),document.getElementById("mcpdownloads").innerHTML=this.#d(),this.#y();var u=this.#r();document.getElementById("mcpplayersonginfo").innerHTML=u,this.#b(),document.getElementById("mcptitle").innerHTML=this.getSongTitle();for(var c=document.getElementsByTagName("A"),h=0;h<c.length;h++)"songbtn icon-play songbtnactive"===(d=c[h]).className&&(d.className="songbtn icon-play");document.getElementById("mcpaudioPlay"+t).className+=" songbtnactive";return this.iCurrentTime=!1,n&&(s=this.sCurrentChannel),this.sCurrentChannel=!1,this.setChannel(s),this.playeraction("play",!0),this.#P(t+1+"/ "+this.aPL.length+"<br>&laquo;"+this.aPL[t].title+"&raquo;"),this.cfg.settings.autoopen&&this.maximize(),!0}setVolume(t){return this.cfg.settings.volume=t,localStorage.setItem("amcp.volume",this.cfg.settings.volume),!!this.oAudio&&(this.oAudio.volume=t,!0)}toggleBoxAndButton(t,e,i){var s=this.#S(t),a=document.getElementById("mcpopt"+t);return e||(e=a.className.indexOf("active")<0?"maximize":"minimize"),s&&(s.style["transition-duration"]=i?"0s":""),"minimize"===e?(s&&(s.style.top=document.documentElement.clientHeight+this._iMinDelta+"px",s.style.opacity=.1),a&&(a.className="")):"maximize"===e&&(s&&(s.setAttribute("style",""),s.style.opacity=1,"undefined"!=typeof addi&&addi.load(s)),a&&(a.className="active")),!0}toggleRepeat(){return this.isRepeatlist()?this.disableRepeat():this.enableRepeat()}toggleShuffle(){return this.isShuffled()?this.disableShuffle():this.enableShuffle()}toggleStatusbar(){return this.isVisibleStatusbar()?this.disableStatusbar():this.enableStatusbar()}updateOnResize(){var t=document.documentElement.clientWidth+" x "+document.documentElement.clientHeight;if(this.sScreensize&&t==this.sScreensize)return!1;this.sScreensize=t;for(var e=["player","about","download","playlist"],i=0;i<e.length;i++){var s=e[i],a=this.#S(s),n=a.style.top.replace("px","")/1,o=a.style.left.replace("px","")/1;this.isVisibleBox(s)?((n<0||n>document.documentElement.clientHeight-50)&&(a.style.top="player"===s?document.documentElement.clientHeight-a.clientHeight-50+"px":""),o>document.documentElement.clientWidth-a.clientWidth&&(a.style.left=document.documentElement.clientWidth-a.clientWidth+"px"),o<0&&(a.style.left="0px")):n<document.documentElement.clientHeight+this._iMinDelta&&this.toggleBoxAndButton(s,"minimize",!0)}}updateStatus(){var t=this.getAudioNetworkstate();if(t){var e=this.getAudioReadystate();document.getElementById("mcpstatusnetwork").innerHTML='<span class="networkstate'+t+'" title="'+this.cfg.aPlayer.status.networkstate[t][1]+'">'+this.cfg.aPlayer.status.networkstate[t][0]+"</span>",document.getElementById("mcpstatusready").innerHTML='<span class="readystate'+e+'" title="'+this.cfg.aPlayer.status.readystate[e][1]+'">'+this.cfg.aPlayer.status.readystate[e][0]+"</span>"}else document.getElementById("mcpstatusnetwork").innerHTML="-",document.getElementById("mcpstatusready").innerHTML="-";return this.updateOnResize(),!0}}var oAudioTmp4ChannelSwitch=!1;mcPlayer.prototype.global=this;var realMerge=function(t,e){for(var i in e)"object"!=typeof t[i]?t[i]=e[i]:"object"==typeof e[i]&&(t[i]=realMerge(t[i],e[i]));return t};