/* https://www.axel-hahn.de/ */
var mcPlayer=function(){this.cfg={about:{version:"0.26",label:"AMC Player - v0.26",description:"<strong>A</strong>xels <strong>M</strong>ulti <strong>C</strong>hannel <strong>Player</strong>.<br><br>This is a webbased HTML5 player.<br>It's focus is the handling of media in stereo and surround for a title.",labeldownload:"Download:<br>",download:"http://sourceforge.net/projects/amcplayer/files/latest/download",labellicense:"License: ",license:"GPL 3.0",labelurl:"Project url:<br>",url:"https://github.com/axelhahn/amcplayer/",labeldocurl:"Documentation:<br>",docurl:"https://www.axel-hahn.de/docs/amcplayer/index.htm"},links:{play:{title:"play"}},aPlayer:{buttons:{play:{sticky:true,title:"Play"},pause:{sticky:true,title:"Pause"},stop:{sticky:true,title:"Stop"},backward:{sticky:false,title:"Back"},forward:{sticky:false,title:"Forward"},jumpprev:{sticky:false,title:"Previous title"},jumpnext:{sticky:false,title:"Next title"},audiochannels:{title:"switch between stereo/ surround",noswitch:"stereo/ surround switch was deactivated (Opera, Firefox)"},volmute:{visible:true,title:"Mute"},volfull:{visible:true,title:"Max. volume"},about:{visible:true,title:"about ...",box:"mcpabout"},playlist:{visible:true,title:"Toggle playlist",box:"mcpplaylist"},repeat:{visible:true,title:"Repeat"},shuffle:{visible:true,title:"Shuffle"},download:{visible:true,title:"Toggle download list",box:"mcpdownloads"},maximize:{label:"Player",sticky:false,title:"Show player"},minimize:{label:"",sticky:false,title:"Minimize"}},bars:{volume:{visible:true,title:"Set volume"},progress:{visible:true,title:"Set position"}},playlist:{title:"Playlist"},download:{title:"Download audio files"}},settings:{autoopen:1,movable:1,repeatlist:1,shuffle:0,volume:0.9}};this.oAudio=false;this.sCurrentChannel=false;this.iMaxVol=1;this.iCurrentTime=false;this.bIsFading=false;this.iVolInc=0.02;this.iTimer=20;this.iHudTimer=5;this.iRemoveTimer=2;this.aPL=[];this.iCurrentSong=-1;this.aPlayorderList=[];this.iPlaylistId=-1;this.name=false;this.playlink="[title]";this.canPlaySurround=function(){var a=true;if(navigator.userAgent.indexOf("Presto/")>=0){a=false}this.bCanSurround=a;return a};this._scanAudios=function(){var f=document.getElementsByTagName("AUDIO");var h=new Array();var m=false;var l=false;var k=false;var d=false;var c=false;for(var g=0;g<f.length;g++){k=f[g].title;f[g].style.display="none";if(!k){k="audio #"+(g+1)}d={title:f[g].title,sources:{}};for(var e=0;e<f[g].children.length;e++){c=f[g].children[e];if(c.tagName==="SOURCE"){l="any";if(c.title){l=c.title}m={src:c.src,type:c.type};if(!d.sources[l]){dummy=d.sources[l]=new Array()}dummy=d.sources[l].push(m)}}this.addAudio(d);var b=document.createElement("A");b.href="#";b.title=this.cfg.links.play.title+": "+k;b.innerHTML=this.playlink.replace("[title]","");b.setAttribute("onclick",this.name+".setSong("+g+"); /* "+this.name+".maximize(); */ return false;");b.setAttribute("class","songbtn icon-play");b.setAttribute("id","mcpaudioPlay"+g);f[g].parentNode.appendChild(b)}return h};this.addAudio=function(a){if(!a.sources){return false}if(!a.title){a.title="audio "+(this.aPL.length+1)}this.aPL.push(a);this._generatePlayorder()};this._genPlayer=function(){var b="";var d=new Array("play","pause","stop","backward","forward");if(this.aPL.length>1){d.push("jumpprev","jumpnext")}b+='<div id="mcpplayerbtndiv">';for(var a=0;a<d.length;a++){b+='<a href="#" id="mcp'+d[a]+'" onclick="'+this.name+".playeraction('"+d[a]+'\'); return false;" title="'+this.cfg.aPlayer.buttons[d[a]].title+'"></a>'}b+='</div><span id="mcptime"><span id="mcptimeplayed">-:--</span>/ <span id="mcptimetotal">-:--</span></span><div id="mcpprogressdiv"'+(this.cfg.aPlayer.bars.progress.visible?"":'style="display: none"')+'><canvas id="mcpprogresscanvas" title="'+this.cfg.aPlayer.bars.progress.title+'"></canvas><div id="mcpprogressbar"></div></div><div id="mcpvolumediv" title="volume"><a href="#" id="mcpvolmute" onclick="'+this.name+'.setVolume(0); return false;" '+(this.cfg.aPlayer.buttons.volmute.visible?"":'style="display: none" ')+'title="'+this.cfg.aPlayer.buttons.volmute.title+'"></a><canvas id="mcpvolumecanvas" '+(this.cfg.aPlayer.bars.volume.visible?"":'style="display: none" ')+'title="'+this.cfg.aPlayer.bars.volume.title+'"></canvas><a href="#" id="mcpvolfull" onclick="'+this.name+'.setVolume(1); return false;" '+(this.cfg.aPlayer.buttons.volfull.visible?"":'style="display: none" ')+'title="'+this.cfg.aPlayer.buttons.volfull.title+'"></a></div><div id="mcpchannels"></div><div id="mcpoptions">';b+='<a href="#" onclick="'+this.name+'.toggleRepeat(); return false;" id="mcpoptrepeat" '+(this.isRepeatlist()?'class="active" ':"")+'title="'+this.cfg.aPlayer.buttons.repeat.title+'"></a><a href="#" onclick="'+this.name+'.toggleShuffle(); return false;" id="mcpoptshuffle" '+(this.cfg.settings.shuffle?'class="active" ':"")+'title="'+this.cfg.aPlayer.buttons.shuffle.title+'"></a>';var c=["download","playlist","about"];for(var a=0;a<c.length;a++){idLink="mcpopt"+c[a];b+='<a href="#" onclick="'+this.name+".toggleBoxAndButton('"+c[a]+'\'); return false;" id="mcpopt'+c[a]+'" '+(this.cfg.aPlayer.buttons[c[a]].visible?"":'style="display: none" ')+' title="'+this.cfg.aPlayer.buttons[c[a]].title+'"></a>'}b+="</div>";return b};this._genAboutbox=function(){return'<div class="mcpbox">'+this.cfg.about.label+'<span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+".toggleBoxAndButton('about', 'minimize'); return false;\" title=\""+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div><div><p>"+this.cfg.about.description+"</p><p>"+this.cfg.about.labellicense+""+this.cfg.about.license+"</p><p>"+this.cfg.about.labelurl+'<a href="'+this.cfg.about.url+'" target="_blank">'+this.cfg.about.url+"</a></p><p>"+this.cfg.about.labeldownload+'<a href="'+this.cfg.about.download+'" target="_blank">'+this.cfg.about.download+"</a></p><p>"+this.cfg.about.labeldocurl+'<a href="'+this.cfg.about.docurl+'" target="_blank">'+this.cfg.about.docurl+"</a></p></div>"};this._genPlaylist=function(){var b=this._genPlaylist.arguments[0];var c='<div class="mcpbox">'+this.cfg.aPlayer.playlist.title+'<span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+".toggleBoxAndButton('playlist', 'minimize'); return false;\" title=\""+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div>";if(this.aPL.length>0){c+="<ul>";for(var a=0;a<this.aPL.length;a++){c+="<li"+(b===a?' class="active"':"")+'><a href="#" onclick="'+this.name+".setSong("+a+'); return false;">'+(this.aPL[a]["title"]?this.aPL[a]["title"]:"Audio #"+(a+1))+"</a></li>"}c+="</ul>"}return c};this._genDownloads=function(){var c="";if(this.aPL.length>0){c+='<div class="mcpbox">'+this.cfg.aPlayer.download.title+'<span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+".toggleBoxAndButton('download', 'minimize'); return false;\" title=\""+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div><ul>";for(var b=0;b<this.aPL.length;b++){sSong=this.aPL[b]["title"];if(!sSong){sSong="Audio #"+(b+1)}c+="<li>"+sSong+"<ul>";for(var a in this.aPL[b]["sources"]){c+="<li>"+a+": ";for(j=0;j<this.aPL[b]["sources"][a].length;j++){sSrc=this.aPL[b]["sources"][a][j]["src"];sExt=this.aPL[b]["sources"][a][j]["type"].replace("audio/","");if(!sExt){sExt=this.aPL[b]["sources"][a][j]["src"].replace(/^.*\/|\.[^.]*$/g,"")}c+='<a href="'+this.aPL[b]["sources"][a][j]["src"]+'">'+sExt+"</a> | "}c+="</li>"}c+="</ul></li>"}c+="</ul>"}return c};this._generatePlaylist=function(){this._scanAudios();this._generatePlayorder()};this._randomSort=function(d,c){return(parseInt(Math.random()*10)%2)};this._generatePlayorder=function(){this.aPlayorderList=[];if(this.aPL.length){for(var a=0;a<this.aPL.length;a++){this.aPlayorderList[a]=a}if(this.isShuffled()){if(this.iCurrentSong>=0){this.aPlayorderList.splice(this.iCurrentSong,1)}this.aPlayorderList.sort(this._randomSort);if(this.iCurrentSong>=0){this.aPlayorderList.unshift(this.iCurrentSong)}}this._findPlaylistId()}};this._findPlaylistId=function(){this.iPlaylistId=false;if(this.iCurrentSong>=0){for(var a=0;a<this.aPlayorderList.length;a++){if(this.aPlayorderList[a]===this.iCurrentSong){this.iPlaylistId=a}}}return this.iPlaylistId};this._initHtml=function(){var a=' style="top: '+((document.documentElement.clientHeight+100)+"px")+';"';this.oDivDownloads=document.getElementById("mcpdownloads");if(!this.oDivDownloads){document.getElementsByTagName("BODY")[0].innerHTML+='<div id="mcpdownloads" class="draggable saveposition"'+a+"></div>";this.oDivDownloads=document.getElementById("mcpdownloads")}this.oDivDownloads.innerHTML=this._genDownloads();this.oDivPlaylist=document.getElementById("mcpplaylist");if(!this.oDivPlaylist){document.getElementsByTagName("BODY")[0].innerHTML+='<div id="mcpplaylist" class="draggable saveposition"'+a+"></div>";this.oDivPlaylist=document.getElementById("mcpplaylist")}this.oDivPlaylist.innerHTML=this._genPlaylist();this.oDivPlayerwrapper=document.getElementById("mcpwrapper");if(!this.oDivPlayerwrapper){document.getElementsByTagName("BODY")[0].innerHTML+='<div id="mcpwrapper"'+(this.cfg.settings.movable?'class="draggable saveposition"':"")+"></div>";this.oDivPlayerwrapper=document.getElementById("mcpwrapper")}this.oDivHeader=document.getElementById("mcpheader");if(!this.oDivHeader){this.oDivPlayerwrapper.innerHTML+='<div id="mcpheader" class="mcpbox">'+this.cfg.about.label+' <span id="mcptitle"></span><span class="mcpsystembutton"><a href="#" class="icon-down-open-1" onclick="'+this.name+'.minimize(); return false" title="'+this.cfg.aPlayer.buttons.minimize.title+'">'+this.cfg.aPlayer.buttons.minimize.label+"</a></span></div>"}if(!this.oDivAudios){this.oDivPlayerwrapper.innerHTML+='<div id="mcpplayeraudios"></div>';this.oDivAudios=document.getElementById("mcpplayeraudios")}this.oDivPlayer=document.getElementById("mcplayer");if(!this.oDivPlayer){this.oDivPlayerwrapper.innerHTML+='<div id="mcplayer"></div>';this.oDivPlayer=document.getElementById("mcplayer");this.oDivPlayer.innerHTML=this._genPlayer()}this.oDivFooter=document.getElementById("mcpfooter");if(!this.oDivFooter){this.oDivPlayerwrapper.innerHTML+='<div id="mcpfooter">'+this.about+"</div>"}this.oAPlayermaximize=document.getElementById("mcpmaximize");if(!this.oAPlayermaximize){document.getElementsByTagName("BODY")[0].innerHTML+='<a href="#" id="mcpmaximize" class="mcpsystembutton hidebutton" onclick="'+this.name+'.maximize(); return false" title="'+this.cfg.aPlayer.buttons.maximize.title+'">'+this.cfg.aPlayer.buttons.maximize.label+"</a>";this.oAPlayermaximize=document.getElementById("mcpmaximize")}document.getElementsByTagName("BODY")[0].innerHTML+='<div id="mcpabout" class="draggable saveposition"'+a+">"+this._genAboutbox()+"</div>";this.oDivPlayerhud=document.getElementById("mcphud");if(!this.oDivPlayerhud){document.getElementsByTagName("BODY")[0].innerHTML+='<div id="mcphud"></div>';this.oDivPlayerhud=document.getElementById("mcphud")}};this.minimize=function(){o=document.getElementById("mcpwrapper");o.style.top=(document.documentElement.clientHeight+100)+"px";this.minimizeBox("about");this.minimizeBox("download");this.minimizeBox("playlist");o=document.getElementById("mcpmaximize");o.className=""};this.makeMainwindowMovable=function(a){this.cfg.settings.movable=a;o=document.getElementById("mcpwrapper");if(this.cfg.settings.movable){o.className="draggable saveposition";if(typeof addi!=="undefined"){addi.initDiv(o)}}else{o.className="";if(typeof addi!=="undefined"){addi.resetDiv(o)}this.maximize();o.setAttribute("style","")}};this.maximize=function(){if(this.cfg.settings.movable&&typeof addi!=="undefined"){addi.load(document.getElementById("mcpwrapper"))}else{document.getElementById("mcpwrapper").setAttribute("style","")}document.getElementById("mcpmaximize").className="hidebutton"};this._showInfo=function(a){if(!this.iHudTimer){return false}var b=document.getElementById("mcphud");this.iRemoveTimer=this.iHudTimer*1000;b.className="active";b.innerHTML=a;this._decHudTimer();return true};this._hideInfo=function(){var a=document.getElementById("mcphud");a.className="";return true};this._decHudTimer=function(){this.iRemoveTimer=this.iRemoveTimer-100;if(this.iRemoveTimer>0){window.setTimeout(this.name+"._decHudTimer()",100)}else{this._hideInfo();this.iRemoveTimer=false}};this._togglehelperGetDiv=function(a){return(this.cfg.aPlayer.buttons[a]&&this.cfg.aPlayer.buttons[a].box)?document.getElementById(this.cfg.aPlayer.buttons[a].box):false};this.toggleBoxAndButton=function(c,b){var a=this._togglehelperGetDiv(c);var d=document.getElementById("mcpopt"+c);if(!b){b=(d.className.indexOf("active")<0?"maximize":"minimize")}if(b==="minimize"){if(a){a.style.top=(document.documentElement.clientHeight+10)+"px";a.style.opacity=0.1}if(d){d.className=""}}else{if(b==="maximize"){if(a){a.setAttribute("style","");a.style.opacity=1;if(typeof addi!=="undefined"){addi.load(a)}}if(d){d.className="active"}}}return true};this.isVisibleBox=function(b){var a=this._togglehelperGetDiv(b);return !!a.className};this.isVisibleBoxAbout=function(){return this.isVisibleBox("about")};this.isVisibleBoxDownload=function(){return this.isVisibleBox("download")};this.isVisibleBoxPlaylist=function(){return this.isVisibleBox("playlist")};this.toggleRepeat=function(){if(this.isRepeatlist()){return this.disableRepeat()}else{return this.enableRepeat()}};this.enableRepeat=function(){this.cfg.settings.repeatlist=true;this.toggleBoxAndButton("repeat","maximize")};this.disableRepeat=function(){this.cfg.settings.repeatlist=false;this.toggleBoxAndButton("repeat","minimize")};this.toggleShuffle=function(){if(this.isShuffled()){return this.disableShuffle()}else{return this.enableShuffle()}};this.enableShuffle=function(){this.cfg.settings.shuffle=true;this._generatePlayorder();this.toggleBoxAndButton("shuffle","maximize")};this.disableShuffle=function(){this.cfg.settings.shuffle=false;this._generatePlayorder();this.toggleBoxAndButton("shuffle","minimize")};this.minimizeBox=function(a){return this.toggleBoxAndButton(a,"minimize")};this.maximizeBox=function(a){return this.toggleBoxAndButton(a,"maximize")};this.playeraction=function(a){if(!this.oAudio){if(a==="play"){this.setSong(this.aPlayorderList[0])}else{return false}}switch(a){case"play":this.oAudio.play();break;case"pause":this.oAudio.pause();break;case"stop":this.oAudio.pause();try{this.oAudio.currentTime=0}catch(f){}break;case"forward":this.oAudio.currentTime+=10;break;case"backward":this.oAudio.currentTime-=10;break;case"jumpprev":this.setPreviousSong();break;case"jumpnext":this.setNextSong();break;default:alert("playeraction not implemented yet: ["+a+"]")}if(this.cfg.aPlayer.buttons[a].sticky){var b=document.getElementById("mcpplayerbtndiv");var d=b.getElementsByTagName("A");for(var c=0;c<d.length;c++){d[c].className=""}document.getElementById("mcp"+a).className="active"}};this.setAudioPosition=function(a){if(!this.sCurrentChannel||this.oAudio.duration<a){return false}return this.oAudio.currentTime=a};this.setPreviousSong=function(){if(!this.aPlayorderList||!this.aPlayorderList.length){return false}if(this.iPlaylistId>0){return this.setSong(this.aPlayorderList[this.iPlaylistId-1])}return this.setSong(this.aPlayorderList[this.aPlayorderList.length-1])};this.setNextSong=function(){if(!this.aPL||!this.aPL.length){return false}if(this.iPlaylistId<(this.aPlayorderList.length-1)){return this.setSong(this.aPlayorderList[this.iPlaylistId+1])}else{this._generatePlayorder();if(this.isRepeatlist()){this.setSong(this.aPlayorderList[(this.isShuffled()?1:0)])}}};this.setSong=function(b){if(!this.aPL[b]){return false}if(this.bIsFading){return false}var q="";var p="";var c=false;var m=false;var a=false;var l=0;if(this.oAudio){this.getVolume();this.oAudio.pause();try{this.oAudio.currentTime=0}catch(k){}this.oAudio=false}this.oDivAudios.innerHTML="";var g="";for(var h in this.aPL[b]["sources"]){if(this.aPL[b]["sources"][h].length){if(!c){c=h}if(m!==h){l++;p+="<li class";p+=">";if(this.bCanSurround){p+='<a href="#" onclick="'+this.name+".setChannel('"+h+'\'); return false;" title="'+this.cfg.aPlayer.buttons.audiochannels.title+": "+h+'">'+h+"</a>"}else{p+='<a href="#" onclick="return false;" title="'+this.cfg.aPlayer.buttons.audiochannels.noswitch+'">'+h+"</a>"}p+="</li>";m=h;if(h===this.sCurrentChannel){a=true}}q+='<audio id="mcp'+h+'" '+g+" >";for(f=0;f<this.aPL[b]["sources"][h].length;f++){source=this.aPL[b]["sources"][h][f];sourcesrc=String(source.src);if(sourcesrc.indexOf("?")<0){sourcesrc+="?"}q+='<source src="'+sourcesrc+'" type="'+source.type+'">'}q+="</audio>"}}if(l===1){p="<li>"+h+"</li>"}document.getElementById("mcpplayeraudios").innerHTML=q;if(p){p="<ul>"+p+"</ul>"}document.getElementById("mcpchannels").innerHTML=p;this.iCurrentSong=b;this._findPlaylistId();document.getElementById("mcpplaylist").innerHTML=this._genPlaylist(b);var d=document.getElementsByTagName("A");for(var f=0;f<d.length;f++){oLink=d[f];if(oLink.className==="songbtn icon-play songbtnactive"){oLink.className="songbtn icon-play"}}o=document.getElementById("mcpaudioPlay"+b).className+=" songbtnactive";this.iCurrentTime=false;if(a){c=this.sCurrentChannel}this.sCurrentChannel=false;this.setChannel(c);this.playeraction("play",true);document.getElementById("mcptitle").innerHTML=this.aPL[b]["title"];this._showInfo((b+1)+"/ "+this.aPL.length+"<br>&laquo;"+this.aPL[b]["title"]+"&raquo;");if(this.cfg.settings.autoopen){this.maximize()}return true};this.setChannel=function(b){var a=document.getElementById("mcpchannels");var e=a.getElementsByTagName("LI");if(e.length){for(var c=0;c<e.length;c++){oALI=e[c].getElementsByTagName("A");if(oALI&&oALI.length>0){oALI[0].className="";if(oALI[0].innerHTML&&oALI[0].innerHTML===b){var d=oALI[0].parentNode;oALI[0].className="active"}}e[c].className=""}}if(d){d.className="active"}if(this.sCurrentChannel===b){return false}if(this.bIsFading){return false}if(this.oAudio){this.iCurrentTime=this.oAudio.currentTime;this.getVolume();this._fadeOut(this.sCurrentChannel)}this.oAudio=false;if(b){oAudioTmp=document.getElementById("mcp"+b);this.oAudio=oAudioTmp;if(this.oAudio){this._wait4Audio(this.oAudio,this.iCurrentTime);this.oAudio.volume=this.cfg.settings.volume;oAudioTmp.addEventListener("timeupdate",function(){if(!oAudioTmp.currentTime){document.getElementById("mcptimeplayed").innerHTML="-:--";document.getElementById("mcptimetotal").innerHTML="-:--";return false}var l=parseInt(oAudioTmp.currentTime%60);var f=parseInt((oAudioTmp.currentTime/60)%60);if(l<10){l="0"+l}var k=parseInt(oAudioTmp.duration%60);var h=parseInt((oAudioTmp.duration/60)%60);if(k<10){k="0"+k}document.getElementById("mcptimeplayed").innerHTML=f+":"+l;document.getElementById("mcptimetotal").innerHTML=h+":"+k;var i=document.getElementById("mcpprogresscanvas");if(i.getContext){var g=i.getContext("2d");g.clearRect(0,0,i.width,i.height);var q=0.05+oAudioTmp.currentTime/oAudioTmp.duration/10*1;g.fillStyle="rgba(0,0,0, "+q+")";var p=Math.round((oAudioTmp.currentTime/oAudioTmp.duration)*(i.width));if(p>0){g.fillRect(0,0,p,i.height);g.strokeStyle="rgba(0,0,0,0.3)";g.lineWidth=1;g.beginPath();g.moveTo(p,0);g.lineTo(p,i.height);g.stroke()}}},false);document.getElementById("mcpprogresscanvas").addEventListener("click",function(h){var f=new Number();var k=document.getElementById("mcpwrapper");var i=document.getElementById("mcpprogressdiv");var g=document.getElementById("mcpprogresscanvas");if(h.x!==undefined&&h.y!==undefined){f=h.x}else{f=h.clientX+document.body.scrollLeft+document.documentElement.scrollLeft}f-=g.offsetLeft+k.offsetLeft+i.offsetLeft;if(oAudioTmp&&oAudioTmp.currentTime){oAudioTmp.currentTime=oAudioTmp.duration*(f/g.clientWidth)}},true);oAudioTmp.addEventListener("volumechange",function(){var g=document.getElementById("mcpvolumecanvas");if(g.getContext){var h=g.getContext("2d");h.clearRect(0,0,g.width,g.height);var i=0.05+oAudioTmp.volume/10*1;h.fillStyle="rgba(0,0,0, "+i+")";var f=Math.round(oAudioTmp.volume*g.width);if(f>0){h.fillRect(0,0,f,g.height);h.strokeStyle="rgba(0,0,0,0.3)";h.lineWidth=3;h.beginPath();h.moveTo((f),0);h.lineTo(f,g.height);h.stroke()}}},false);document.getElementById("mcpvolumecanvas").addEventListener("click",function(i){var f=new Number();var k=document.getElementById("mcpwrapper");var g=document.getElementById("mcpvolumecanvas");if(i.x!==undefined&&i.y!==undefined){f=i.x}else{f=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft}f-=g.offsetLeft+k.offsetLeft;try{localStorage.setItem("amcp.volume",f/g.clientWidth);oAudioTmp.volume=(f/g.clientWidth)}catch(h){console.error("Error:"+h)}},true);oAudioTmp.addEventListener("ended",function(){document.getElementById("mcpjumpnext").click()},false)}}this.sCurrentChannel=b;localStorage.setItem("amcp.channels",this.sCurrentChannel);return true};this.setVolume=function(a){this.cfg.settings.volume=a;localStorage.setItem("amcp.volume",this.cfg.settings.volume);if(this.oAudio){this.oAudio.volume=a;return true}return false};this._wait4Audio=function(b,a){b.volume=0.001;b.play();if(a){b.currentTime=a}return true};this._fade=function(b,a){this.bIsFading=true;o=document.getElementById("mcp"+a);if(!o){return false}iVol=o.volume;iInc=(b<iVol?-this.iVolInc:this.iVolInc);iVol+=iInc;if((b===0&&iVol>0)||(b>0&&iVol<b)){o.volume=iVol;window.setTimeout(this.name+"._fade("+b+", '"+a+"')",this.iTimer)}else{this.bIsFading=false;o.volume=b;if(iVol<=0){o.pause()}}return true};this._fadeOut=function(a){this._fade(0,a)};this.getAudioChannels=function(){return this.sCurrentChannel};this.getAllAudioChannels=function(){var a=this.getSong();if(!a){return false}var b=[];for(var c in a.sources){b.push(c)}return b};this.getAudioDuration=function(){if(!this.sCurrentChannel){return false}return this.oAudio.duration};this.getAudioPosition=function(){if(!this.sCurrentChannel){return false}return this.oAudio.currentTime};this.getAudioSrc=function(){if(!this.sCurrentChannel){return false}return this.oAudio.currentSrc};this.getVolume=function(){if(this.oAudio){this.cfg.settings.volume=this.oAudio.volume;return this.cfg.settings.volume}return false};this.getPlaylist=function(){return(!this.aPL||!this.aPL.length)?false:this.aPL};this.getPlaylistCount=function(){return(this.aPL?this.aPL.length:false)};this.getPlayorder=function(){return this.aPlayorderList};this.getSong=function(){if(!this.aPL||!this.aPL.length){return false}return this.aPL[this.iCurrentSong]};this.getSongId=function(){return this.iCurrentSong};this.getSongTitle=function(){var a=this.getSong();return a?a.title:false};this.getPlaylistId=function(){return this.iPlaylistId};this.isMuted=function(){return(this.oAudio&&(this.oAudio.muted||!this.oAudio.volume))};this.isPaused=function(){return(this.oAudio&&this.oAudio.paused&&this.oAudio.currentTime!==0)};this.isPlaying=function(){return(this.oAudio&&!this.oAudio.paused)};this.isRepeatlist=function(){return(this.cfg.settings.repeatlist?!!this.cfg.settings.repeatlist:false)};this.isShuffled=function(){return(this.cfg.settings.shuffle?this.cfg.settings.shuffle:false)};this.isStopped=function(){return(!this.oAudio||this.oAudio.currentTime===0)};this._getName=function(){for(var a in this.global){if(this.global[a]===this){return this._setName(a)}}};this._setName=function(a){this.name=a;return this.name};this.init=function(){this._getName();this._generatePlaylist();this._initHtml();if(typeof addi!=="undefined"){addi.init()}this.minimizeBox("about");this.minimizeBox("download");this.minimizeBox("playlist");return true};if(arguments[0]){this.cfg=realMerge(this.cfg,arguments[0])}this.canPlaySurround();if(localStorage){this.sCurrentChannel=localStorage.getItem("amcp.channels")?localStorage.getItem("amcp.channels"):false;this.cfg.settings.volume=localStorage.getItem("amcp.volume")?localStorage.getItem("amcp.volume"):1}return true};mcPlayer.prototype.global=this;var realMerge=function(b,a){for(n in a){if(typeof b[n]!=="object"){b[n]=a[n]}else{if(typeof a[n]==="object"){b[n]=realMerge(b[n],a[n])}}}return b};